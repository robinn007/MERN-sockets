(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{106:function(e,t){},109:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n(9),c=n.n(a),r=n(63),i=n.n(r),s=n(140),l=n(148),d=n(143),m=n(144),j=n(146),u=n(145),b=n(149),h=(n(109),n(8));const g=()=>Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL?Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_SERVER_URL:window.location.hostname.includes("app.github.dev")?window.location.origin.replace("-3000.app.github.dev","-5000.app.github.dev"):"http://localhost:5000";var O=()=>{const[e,t]=Object(o.useState)(!1),[n,a]=Object(o.useState)([]),[c,r]=Object(o.useState)(""),[O,v]=Object(o.useState)(""),[p,S]=Object(o.useState)(""),[x,y]=Object(o.useState)(""),[_,R]=Object(o.useState)(""),E=Object(o.useRef)(null),T=async()=>{try{const e=g();(await fetch(`${e}/login`,{method:"GET",credentials:"include"})).ok?(t(!0),R(""),C()):R("Login failed")}catch(e){R("Login failed: "+e.message)}},C=()=>{if(E.current)return;const e=g();E.current=i()(e,{withCredentials:!0}),E.current.on("connect",()=>{S(E.current.id),R(""),console.log("connected",E.current.id)}),E.current.on("receive-message",e=>{console.log("Received message:",e),a(t=>[...t,e])}),E.current.on("connect_error",e=>{R("Connection failed: "+e.message),console.error("Connection error:",e)}),E.current.on("disconnect",e=>{console.log("Disconnected:",e),S("")})};return Object(o.useEffect)(()=>()=>{E.current&&E.current.disconnect()},[]),e?Object(h.jsx)(s.a,{maxWidth:"sm",children:Object(h.jsxs)(l.a,{style:{marginTop:16},children:[Object(h.jsx)(d.a,{variant:"h4",component:"div",gutterBottom:!0,children:"Socket.IO Chat"}),Object(h.jsxs)(d.a,{variant:"body2",component:"div",gutterBottom:!0,children:["Socket ID: ",p]}),_&&Object(h.jsx)(b.a,{severity:"error",style:{marginBottom:16},children:_}),Object(h.jsxs)(l.a,{component:"form",onSubmit:e=>{e.preventDefault(),E.current&&x&&(E.current.emit("join-room",x),y(""))},style:{marginBottom:24},children:[Object(h.jsx)(d.a,{variant:"h6",children:"Join Room"}),Object(h.jsx)(j.a,{value:x,onChange:e=>y(e.target.value),label:"Room Name",variant:"outlined",size:"small",style:{marginRight:8}}),Object(h.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Join"})]}),Object(h.jsxs)(l.a,{component:"form",onSubmit:e=>{e.preventDefault(),E.current&&c&&O&&(E.current.emit("message",{room:O,message:c}),r(""))},style:{marginBottom:24},children:[Object(h.jsx)(d.a,{variant:"h6",children:"Send Message"}),Object(h.jsx)(j.a,{value:c,onChange:e=>r(e.target.value),label:"Message",variant:"outlined",size:"small",style:{marginRight:8,marginBottom:8}}),Object(h.jsx)(j.a,{value:O,onChange:e=>v(e.target.value),label:"Room",variant:"outlined",size:"small",style:{marginRight:8,marginBottom:8}}),Object(h.jsx)(m.a,{type:"submit",variant:"contained",color:"primary",children:"Send"})]}),Object(h.jsxs)(l.a,{children:[Object(h.jsx)(d.a,{variant:"h6",children:"Messages:"}),Object(h.jsx)(l.a,{style:{marginTop:8},children:n.map((e,t)=>Object(h.jsx)(u.a,{style:{padding:8,marginBottom:8,backgroundColor:"#f5f5f5"},children:Object(h.jsx)(d.a,{variant:"body1",component:"div",children:e})},t))})]})]})}):Object(h.jsx)(s.a,{maxWidth:"sm",children:Object(h.jsxs)(l.a,{style:{marginTop:32},children:[Object(h.jsx)(d.a,{variant:"h4",component:"div",gutterBottom:!0,children:"Socket.IO Chat"}),Object(h.jsx)(d.a,{variant:"body1",gutterBottom:!0,children:"Please login to access the chat"}),Object(h.jsx)(m.a,{variant:"contained",color:"primary",onClick:T,style:{marginTop:16},children:"Login"}),_&&Object(h.jsx)(b.a,{severity:"error",style:{marginTop:16},children:_})]})})};c.a.render(Object(h.jsx)(O,{}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.b18f219f.chunk.js.map